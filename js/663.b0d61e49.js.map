{"version":3,"file":"js/663.b0d61e49.js","mappings":"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","sources":["webpack://shoe-shop/./src/store/cart.js","webpack://shoe-shop/./src/store/address.js","webpack://shoe-shop/./src/store/order.js","webpack://shoe-shop/./src/store/index.js","webpack://shoe-shop/./src/views/Cart/index.vue","webpack://shoe-shop/./src/views/Cart/index.vue?ae81"],"sourcesContent":["import { defineStore } from \"pinia\";\r\n\r\nconst useCartStore = defineStore(\"cart\", {\r\n  persist: {\r\n    key: \"shoe-shop-cart\",\r\n  },\r\n  state: () => ({\r\n    list: [],\r\n  }),\r\n  getters: {\r\n    effectiveList() {\r\n      return this.list.filter((v) => v.count > 0 && v.isEffective);\r\n    },\r\n    effectiveListCounts() {\r\n      return this.effectiveList.reduce((sum, item) => sum + item.count, 0);\r\n    },\r\n    effectiveListPrice() {\r\n      return this.effectiveList\r\n        .reduce((sum, item) => sum + item.count * Number(item.price), 0)\r\n        .toFixed(2);\r\n    },\r\n    isAllSelected() {\r\n      return (\r\n        this.effectiveList.length !== 0 &&\r\n        this.effectiveList.every((item) => item.selected)\r\n      );\r\n    },\r\n    selectedList() {\r\n      return this.effectiveList.filter((item) => item.selected);\r\n    },\r\n    selectedListCounts() {\r\n      return this.selectedList.reduce((sum, item) => sum + item.count, 0);\r\n    },\r\n    selectedListPrice() {\r\n      return this.selectedList\r\n        .reduce((sum, item) => sum + item.count * Number(item.price), 0)\r\n        .toFixed(2);\r\n    },\r\n  },\r\n  actions: {\r\n    async addCart(data) {\r\n      const { skuId, count } = data;\r\n      const goodsItem = this.list.find((item) => item.skuId === skuId);\r\n      if (!goodsItem) {\r\n        this.list.unshift(data);\r\n      } else {\r\n        goodsItem.count += count;\r\n      }\r\n    },\r\n    async getCartList() {\r\n      this.list.forEach(async (cartItem) => {});\r\n    },\r\n    async deleteCart(skuIds) {\r\n      this.list = this.list.filter((item) => !skuIds.includes(item.skuId));\r\n    },\r\n    async deleteCartBySelected() {\r\n      this.list = this.list.filter((item) => !item.selected);\r\n    },\r\n    async updateCart(skuId, data) {\r\n      const { selected, count } = data;\r\n      const cartItem = this.list.find((item) => item.skuId === skuId);\r\n      if (cartItem) {\r\n        if (count !== undefined) cartItem.count = count;\r\n        if (selected !== undefined) cartItem.selected = selected;\r\n      }\r\n    },\r\n    async updateCartAllSelected(data) {\r\n      const { selected } = data;\r\n      this.list.forEach((item) => {\r\n        item.selected = selected;\r\n      });\r\n    },\r\n    clearCart() {\r\n      this.list = [];\r\n    },\r\n  },\r\n});\r\n\r\nexport default useCartStore;\r\n","import { defineStore } from \"pinia\";\r\n\r\nconst useAddressStore = defineStore(\"address\", {\r\n  persist: {\r\n    key: \"shoe-shop-address\",\r\n  },\r\n  state: () => ({\r\n    receiver: null,\r\n    phone: null,\r\n    address: null,\r\n  }),\r\n  getters: {\r\n    getAddress() {\r\n      return {\r\n        receiver: this.receiver,\r\n        phone: this.phone,\r\n        address: this.address,\r\n      };\r\n    },\r\n  },\r\n  actions: {\r\n    async updateAddress(data) {\r\n      const { receiver, phone, address } = data;\r\n      this.receiver = receiver;\r\n      this.phone = phone;\r\n      this.address = address;\r\n    },\r\n  },\r\n});\r\n\r\nexport default useAddressStore;\r\n","import { defineStore } from \"pinia\";\r\n\r\nconst useOrderStore = defineStore(\"order\", {\r\n  persist: {\r\n    key: \"shoe-shop-order\",\r\n  },\r\n  state: () => ({\r\n    list: [],\r\n  }),\r\n  getters: {\r\n    getOrder() {\r\n      return this.list;\r\n    },\r\n  },\r\n  actions: {\r\n    async addOrder(data) {\r\n      this.list.unshift(data);\r\n    },\r\n  },\r\n});\r\n\r\nexport default useOrderStore;\r\n","import useCartStore from \"./cart\";\nimport useAddressStore from \"./address\";\nimport useOrderStore from \"./order\";\n\nconst useStore = () => {\n  return {\n    cart: useCartStore(),\n    address: useAddressStore(),\n    order: useOrderStore(),\n  };\n};\n\nexport default useStore;\n","<script setup>\r\nimport useStore from \"@/store\";\r\nimport shoe from \"@/mock/shoe.json\";\r\nimport { storeToRefs } from \"pinia\";\r\nimport { computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst { cart } = useStore();\r\nconst { effectiveListCounts, selectedListCounts, selectedListPrice } = storeToRefs(cart);\r\n\r\nconst changeSeleted = (skuId, selected) => {\r\n  cart.updateCart(skuId, { selected: selected });\r\n};\r\n\r\nconst changeCount = (skuId, count) => {\r\n  cart.updateCart(skuId, { count: count });\r\n};\r\n\r\nconst countMax = (id) => {\r\n  const inventory = shoe.data.filter((s) => s.id === id)[0].inventory;\r\n  return Number(inventory);\r\n};\r\n\r\nconst isAllSelected = computed({\r\n  get() {\r\n    return cart.isAllSelected;\r\n  },\r\n  set(selected) {\r\n    cart.updateCartAllSelected({ selected: selected, ids: [] });\r\n  },\r\n});\r\n\r\nconst router = useRouter();\r\n\r\nconst goToCheckout = () => {\r\n  if (cart.selectedListCounts === 0) {\r\n    return;\r\n  }\r\n  router.push(\"/checkout\");\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"ss-cart-page\">\r\n    <div class=\"container\">\r\n      <div class=\"cart\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th width=\"120\">\r\n                <SsCheckbox v-model=\"isAllSelected\">全選</SsCheckbox>\r\n              </th>\r\n              <th width=\"400\">商品資訊</th>\r\n              <th width=\"220\">單價</th>\r\n              <th width=\"220\">尺寸</th>\r\n              <th width=\"180\">數量</th>\r\n              <th width=\"180\">價格</th>\r\n              <th width=\"140\">操作</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in cart.effectiveList\" :key=\"item.skuId\">\r\n              <td>\r\n                <SsCheckbox\r\n                  :model-value=\"item.selected\"\r\n                  @change=\"(selected) => changeSeleted(item.skuId, selected)\"\r\n                />\r\n              </td>\r\n              <td>\r\n                <div class=\"goods\">\r\n                  <RouterLink :to=\"`/goods/${item.id}`\">\r\n                    <img\r\n                      :src=\"`https://vtjoho.b-cdn.net/shoeshop/${item.id}_1.png`\"\r\n                      :alt=\"item.name\"\r\n                    />\r\n\r\n                    <div>\r\n                      <p class=\"name ellipsis\">\r\n                        {{ item.name }}\r\n                      </p>\r\n                    </div>\r\n                  </RouterLink>\r\n                </div>\r\n              </td>\r\n              <td class=\"tc\">\r\n                <p>&dollar;{{ item.price }}</p>\r\n              </td>\r\n              <td class=\"tc\">\r\n                <p>{{ item.size }}</p>\r\n              </td>\r\n              <td class=\"tc\">\r\n                <SsCount\r\n                  :model-value=\"item.count\"\r\n                  @change=\"(count) => changeCount(item.skuId, count)\"\r\n                  :min=\"1\"\r\n                  :max=\"countMax(item.id)\"\r\n                />\r\n              </td>\r\n              <td class=\"tc\">\r\n                <p class=\"f16 red\">\r\n                  &dollar;{{ (item.count * Number(item.price)).toFixed(2) }}\r\n                </p>\r\n              </td>\r\n              <td class=\"tc\">\r\n                <p>\r\n                  <a\r\n                    @click=\"cart.deleteCart([item.skuId])\"\r\n                    class=\"green\"\r\n                    href=\"javascript:;\"\r\n                  >\r\n                    刪除\r\n                  </a>\r\n                </p>\r\n              </td>\r\n            </tr>\r\n            <tr v-if=\"cart.effectiveList.length === 0\">\r\n              <td colspan=\"6\">\r\n                <div class=\"cart-none\" style=\"text-align: center\">\r\n                  <p>購物車內暫時沒有商品</p>\r\n                  <div class=\"btn\" style=\"margin: 20px\">\r\n                    <SsButton @click=\"$router.push('/')\" type=\"primary\">\r\n                      繼續逛逛\r\n                    </SsButton>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class=\"action\">\r\n        <div class=\"batch\"></div>\r\n        <div class=\"total\">\r\n          共 {{ effectiveListCounts }} 件有效商品， 以選擇 {{ selectedListCounts }} 件，\r\n          商品總額：\r\n          <span class=\"red\">&dollar;{{ selectedListPrice }}</span>\r\n          <SsButton @click=\"goToCheckout\" type=\"primary\">下單</SsButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.tc {\r\n  text-align: center;\r\n  .ss-numbox {\r\n    margin: 0 auto;\r\n    width: 120px;\r\n  }\r\n}\r\n\r\n.red {\r\n  color: @priceColor;\r\n}\r\n.green {\r\n  color: @ssColor;\r\n}\r\n\r\n.f16 {\r\n  font-size: 16px;\r\n}\r\n\r\n.goods {\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  a {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n\r\n  img {\r\n    width: 100px;\r\n    height: 60px;\r\n  }\r\n\r\n  > div {\r\n    width: 280px;\r\n    font-size: 16px;\r\n    padding-left: 10px;\r\n  }\r\n}\r\n.action {\r\n  display: flex;\r\n  background: #fff;\r\n  margin-top: 20px;\r\n  height: 80px;\r\n  align-items: center;\r\n  font-size: 16px;\r\n  justify-content: space-between;\r\n  padding: 0 30px;\r\n\r\n  .ss-checkbox {\r\n    color: #999;\r\n  }\r\n\r\n  .batch {\r\n    a {\r\n      margin-left: 20px;\r\n    }\r\n  }\r\n\r\n  .red {\r\n    font-size: 18px;\r\n    margin-right: 20px;\r\n    font-weight: bold;\r\n  }\r\n}\r\n\r\n.tit {\r\n  color: #666;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  line-height: 50px;\r\n}\r\n\r\n.ss-cart-page {\r\n  margin-top: 40px;\r\n\r\n  .cart {\r\n    background: #fff;\r\n    color: #666;\r\n\r\n    table {\r\n      border-spacing: 0;\r\n      border-collapse: collapse;\r\n      line-height: 24px;\r\n\r\n      th,\r\n      td {\r\n        padding: 10px;\r\n        border-bottom: 1px solid #f5f5f5;\r\n        &:first-child {\r\n          text-align: left;\r\n          padding-left: 30px;\r\n          color: #999;\r\n        }\r\n      }\r\n\r\n      th {\r\n        font-size: 16px;\r\n        font-weight: normal;\r\n        padding: 20px 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=9313a0c6&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\FrontEnd\\\\Vue\\\\shoe-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9313a0c6\"]])\n\nexport default __exports__"],"names":["useCartStore","defineStore","persist","key","state","list","getters","effectiveList","this","filter","v","count","isEffective","effectiveListCounts","reduce","sum","item","effectiveListPrice","Number","price","toFixed","isAllSelected","length","every","selected","selectedList","selectedListCounts","selectedListPrice","actions","async","data","skuId","goodsItem","find","unshift","forEach","skuIds","includes","cartItem","undefined","clearCart","useAddressStore","receiver","phone","address","getAddress","useOrderStore","getOrder","useStore","cart","order","storeToRefs","changeSeleted","updateCart","changeCount","countMax","id","inventory","shoe","s","computed","get","set","updateCartAllSelected","ids","router","useRouter","goToCheckout","push","__exports__"],"sourceRoot":""}