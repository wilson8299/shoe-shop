"use strict";(self["webpackChunkshoe_shop"]=self["webpackChunkshoe_shop"]||[]).push([[641],{8529:function(e,t,s){s.d(t,{Z:function(){return u}});s(541);var l=s(3766);const d=(0,l.Q_)("cart",{persist:{key:"shoe-shop-cart"},state:()=>({list:[]}),getters:{effectiveList(){return this.list.filter((e=>e.count>0&&e.isEffective))},effectiveListCounts(){return this.effectiveList.reduce(((e,t)=>e+t.count),0)},effectiveListPrice(){return this.effectiveList.reduce(((e,t)=>e+t.count*Number(t.price)),0).toFixed(2)},isAllSelected(){return 0!==this.effectiveList.length&&this.effectiveList.every((e=>e.selected))},selectedList(){return this.effectiveList.filter((e=>e.selected))},selectedListCounts(){return this.selectedList.reduce(((e,t)=>e+t.count),0)},selectedListPrice(){return this.selectedList.reduce(((e,t)=>e+t.count*Number(t.price)),0).toFixed(2)}},actions:{async addCart(e){const{skuId:t,count:s}=e,l=this.list.find((e=>e.skuId===t));l?l.count+=s:this.list.unshift(e)},async getCartList(){this.list.forEach((async e=>{}))},async deleteCart(e){this.list=this.list.filter((t=>!e.includes(t.skuId)))},async deleteCartBySelected(){this.list=this.list.filter((e=>!e.selected))},async updateCart(e,t){const{selected:s,count:l}=t,d=this.list.find((t=>t.skuId===e));d&&(void 0!==l&&(d.count=l),void 0!==s&&(d.selected=s))},async updateCartAllSelected(e){const{selected:t}=e;this.list.forEach((e=>{e.selected=t}))},clearCart(){this.list=[]}}});var i=d;const r=(0,l.Q_)("address",{persist:{key:"shoe-shop-address"},state:()=>({receiver:null,phone:null,address:null}),getters:{getAddress(){return{receiver:this.receiver,phone:this.phone,address:this.address}}},actions:{async updateAddress(e){const{receiver:t,phone:s,address:l}=e;this.receiver=t,this.phone=s,this.address=l}}});var n=r;const a=(0,l.Q_)("order",{persist:{key:"shoe-shop-order"},state:()=>({list:[]}),getters:{getOrder(){return this.list}},actions:{async addOrder(e){this.list.unshift(e)}}});var o=a;const c=()=>({cart:i(),address:n(),order:o()});var u=c},5641:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var l=s(3396),d=s(9242),i=s(7139),r=s(8529),n=s(4870),a=s(2483),o=s(4677);const c=e=>((0,l.dD)("data-v-4a6536ce"),e=e(),(0,l.Cn)(),e),u={class:"pay-checkout-page"},h={class:"container"},p={key:0,class:"wrapper"},_=c((()=>(0,l._)("h3",{class:"box-title"},"收貨地址",-1))),v={class:"box-body"},m={class:"address"},y={class:"text"},f={key:0},w=c((()=>(0,l._)("span",null,"收 件 人：",-1))),b=c((()=>(0,l._)("span",null,"聯絡電話：",-1))),g=c((()=>(0,l._)("span",null,"收貨地址：",-1))),k=c((()=>(0,l._)("h3",{class:"box-title"},"商品資訊",-1))),x={class:"box-body"},L={class:"goods"},C=c((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{width:"520"},"商品資訊"),(0,l._)("th",{width:"170"},"單價"),(0,l._)("th",{width:"170"},"尺寸"),(0,l._)("th",{width:"170"},"數量"),(0,l._)("th",{width:"170"},"價格"),(0,l._)("th",{width:"170"},"應付")])],-1))),z=["src"],P={class:"right"},U=c((()=>(0,l._)("h3",{class:"box-title"},"配送時間",-1))),D={class:"box-body time-box"},$=c((()=>(0,l._)("label",{for:"time1"},"不限時間: 週一至週日",-1))),I=c((()=>(0,l._)("label",{for:"time2"},"工作日：週一至週五",-1))),A=c((()=>(0,l._)("label",{for:"time3"},"週休：週六至週日",-1))),V=c((()=>(0,l._)("h3",{class:"box-title"},"付款方式",-1))),F=c((()=>(0,l._)("div",{class:"box-body"},[(0,l._)("a",{class:"my-btn active",href:"javascript:;"},"貨到付款")],-1))),S=c((()=>(0,l._)("h3",{class:"box-title"},"金額明細",-1))),j={class:"box-body"},q={class:"total"},B=c((()=>(0,l._)("dt",null,"商品件數：",-1))),E=c((()=>(0,l._)("dt",null,"商品總價：",-1))),G=c((()=>(0,l._)("dt",null,[(0,l.Uk)("運"),(0,l._)("i"),(0,l.Uk)("費：")],-1))),N=c((()=>(0,l._)("dt",null,"應付總額：",-1))),O={class:"price"},Q={class:"submit"};var T={__name:"index",setup(e){const t=(0,o.pm)(),{cart:s,address:c,order:T}=(0,r.Z)(),Z=(0,n.qj)({receiver:null,phone:null,address:null}),H=(0,n.qj)({goods:null,summary:null}),W=(0,n.iH)("不限時間: 週一至週日");(0,l.bv)((async()=>{H.goods=s.selectedList,H.summary={goodsCount:s.selectedListCounts,totalPrice:s.selectedListPrice,postFee:60,totalPayPrice:(Number(s.selectedListPrice)+60).toFixed(2)};const{receiver:e,phone:t,address:l}=c.getAddress;Z.receiver=e,Z.phone=t,Z.address=l,console.log(H.goods)}));const K=(0,a.tv)(),R=async()=>{if(!Z.receiver|!Z.phone|!Z.address)return void t.info("請填寫正確的收貨資訊",{timeout:3e3});const e={orderId:(new Date).getTime(),goods:H.goods,summary:H.summary,receiver:Z.receiver,phone:Z.phone,address:Z.address,deliveryTime:W,orderTime:new Date,pay:"貨到付款"};T.addOrder(e),c.updateAddress(Z),s.deleteCartBySelected(),K.replace("/order")};return(e,t)=>{const s=(0,l.up)("RouterLink"),r=(0,l.up)("SsButton");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("div",h,[H.goods?((0,l.wg)(),(0,l.iD)("div",p,[_,(0,l._)("div",v,[(0,l._)("div",m,[(0,l._)("div",y,[Z?((0,l.wg)(),(0,l.iD)("ul",f,[(0,l._)("li",null,[w,(0,l.wy)((0,l._)("input",{type:"text",name:"receiver","onUpdate:modelValue":t[0]||(t[0]=e=>Z.receiver=e),placeholder:"收件人"},null,512),[[d.nr,Z.receiver]])]),(0,l._)("li",null,[b,(0,l.wy)((0,l._)("input",{type:"text",name:"phone","onUpdate:modelValue":t[1]||(t[1]=e=>Z.phone=e),placeholder:"電話"},null,512),[[d.nr,Z.phone]])]),(0,l._)("li",null,[g,(0,l.wy)((0,l._)("input",{type:"text",name:"address","onUpdate:modelValue":t[2]||(t[2]=e=>Z.address=e),placeholder:"收貨地址"},null,512),[[d.nr,Z.address]])])])):(0,l.kq)("",!0)])])]),k,(0,l._)("div",x,[(0,l._)("table",L,[C,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(H.goods,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.skuId},[(0,l._)("td",null,[(0,l.Wm)(s,{to:`/goods/${e.id}`,class:"info"},{default:(0,l.w5)((()=>[(0,l._)("img",{src:`https://vtjoho.b-cdn.net/shoeshop/${e.id}_1.png`,alt:""},null,8,z),(0,l._)("div",P,[(0,l._)("p",null,(0,i.zw)(e.name),1)])])),_:2},1032,["to"])]),(0,l._)("td",null,"$"+(0,i.zw)(e.price),1),(0,l._)("td",null,(0,i.zw)(e.size),1),(0,l._)("td",null,(0,i.zw)(e.count),1),(0,l._)("td",null,"$"+(0,i.zw)(e.price*e.count),1),(0,l._)("td",null,"$"+(0,i.zw)(e.price*e.count),1)])))),128))])])]),U,(0,l._)("div",D,[(0,l.wy)((0,l._)("input",{type:"radio",id:"time1","onUpdate:modelValue":t[3]||(t[3]=e=>W.value=e),name:"time",value:"不限時間: 週一至週日"},null,512),[[d.G2,W.value]]),$,(0,l.wy)((0,l._)("input",{type:"radio",id:"time2","onUpdate:modelValue":t[4]||(t[4]=e=>W.value=e),name:"time",value:"工作日：週一至週五"},null,512),[[d.G2,W.value]]),I,(0,l.wy)((0,l._)("input",{type:"radio",id:"time3","onUpdate:modelValue":t[5]||(t[5]=e=>W.value=e),name:"time",value:"週休：週六至週日"},null,512),[[d.G2,W.value]]),A]),V,F,S,(0,l._)("div",j,[(0,l._)("div",q,[(0,l._)("dl",null,[B,(0,l._)("dd",null,(0,i.zw)(H.summary.goodsCount)+"件",1)]),(0,l._)("dl",null,[E,(0,l._)("dd",null,"$"+(0,i.zw)(H.summary.totalPrice),1)]),(0,l._)("dl",null,[G,(0,l._)("dd",null,"$"+(0,i.zw)(H.summary.postFee),1)]),(0,l._)("dl",null,[N,(0,l._)("dd",O,"$"+(0,i.zw)(H.summary.totalPayPrice),1)])])]),(0,l._)("div",Q,[(0,l.Wm)(r,{onClick:R,type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("提交訂單")])),_:1})])])):(0,l.kq)("",!0)])])}}},Z=s(89);const H=(0,Z.Z)(T,[["__scopeId","data-v-4a6536ce"]]);var W=H}}]);
//# sourceMappingURL=641.ede5df28.js.map