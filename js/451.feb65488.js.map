{"version":3,"file":"js/451.feb65488.js","mappings":"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","sources":["webpack://shoe-shop/./src/views/Goods/components/goods-image.vue","webpack://shoe-shop/./src/views/Goods/components/goods-image.vue?fe11","webpack://shoe-shop/./src/views/Goods/components/goods-sku.vue","webpack://shoe-shop/./src/views/Goods/components/goods-sku.vue?6fb0","webpack://shoe-shop/./src/views/Goods/index.vue","webpack://shoe-shop/./src/views/Goods/index.vue?39af"],"sourcesContent":["<script setup>\r\nimport { reactive, ref, watch } from \"vue\";\r\nimport { useMouseInElement } from \"@vueuse/core\";\r\n\r\nconst props = defineProps({\r\n  images: Array,\r\n  default: () => [],\r\n});\r\n\r\nconst currIndex = ref(0);\r\nconst show = ref(false);\r\nconst layerPosition = reactive({\r\n  left: 0,\r\n  top: 0,\r\n});\r\nconst largePosition = reactive({\r\n  backgroundPositionX: 0,\r\n  backgroundPositionY: 0,\r\n});\r\nconst target = ref(null);\r\nconst { elementX, elementY, isOutside } = useMouseInElement(target);\r\n\r\nwatch([elementX, elementY, isOutside], () => {\r\n  show.value = !isOutside.value;\r\n\r\n  const position = { x: 0, y: 0 };\r\n\r\n  if (elementX.value < 100) position.x = 0;\r\n  else if (elementX.value > 420) position.x = 320;\r\n  else position.x = elementX.value - 100;\r\n\r\n  if (elementY.value < 100) position.y = 0;\r\n  else if (elementY.value > 300) position.y = 200;\r\n  else position.y = elementY.value - 100;\r\n\r\n  layerPosition.left = position.x + \"px\";\r\n  layerPosition.top = position.y + \"px\";\r\n  largePosition.backgroundPositionX = -1.5 * position.x + \"px\";\r\n  largePosition.backgroundPositionY = -1.5 * position.y + \"px\";\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"goods-image\">\r\n    <!-- <div\r\n      v-show=\"show\"\r\n      class=\"large\"\r\n      :style=\"[{ backgroundImage: `url(${images[currIndex]})` }, largePosition]\"\r\n    ></div> -->\r\n    <div class=\"middle\" ref=\"target\">\r\n      <img :src=\"images[currIndex]\" alt=\"\" />\r\n      <!-- <div v-show=\"show\" class=\"layer\" :style=\"layerPosition\"></div> -->\r\n    </div>\r\n    <ul class=\"small\">\r\n      <li v-for=\"(img, i) in images\" :key=\"img\" :class=\"{ active: i === currIndex }\">\r\n        <img @mouseenter=\"currIndex = i\" :src=\"img\" alt=\"\" />\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.goods-image {\r\n  width: 600px;\r\n  height: 400px;\r\n  position: relative;\r\n  display: flex;\r\n  z-index: 100;\r\n\r\n  .large {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 530px;\r\n    width: 520px;\r\n    height: 400px;\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n    background-repeat: no-repeat;\r\n    background-size: cover;\r\n    background-color: #f8f8f8;\r\n  }\r\n\r\n  .middle {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 520px;\r\n    height: 400px;\r\n    background: #f5f5f5;\r\n    position: relative;\r\n    // cursor: move;\r\n\r\n    .layer {\r\n      width: 200px;\r\n      height: 200px;\r\n      background: rgba(0, 0, 0, 0.2);\r\n      left: 0;\r\n      top: 0;\r\n      position: absolute;\r\n    }\r\n  }\r\n\r\n  .small {\r\n    width: 80px;\r\n\r\n    li {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 68px;\r\n      height: 68px;\r\n      margin-left: 12px;\r\n      margin-bottom: 15px;\r\n      cursor: pointer;\r\n\r\n      &:hover,\r\n      &.active {\r\n        border: 2px solid @ssColor;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./goods-image.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./goods-image.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./goods-image.vue?vue&type=style&index=0&id=b2b5f0dc&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\FrontEnd\\\\Vue\\\\shoe-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b2b5f0dc\"]])\n\nexport default __exports__","<script setup>\r\nconst props = defineProps({\r\n  goods: {\r\n    type: Object,\r\n    default: () => ({}),\r\n  },\r\n});\r\n\r\nconst emit = defineEmits([\"change\"]);\r\n\r\nconst clickSpecs = (item, val) => {\r\n  if (val.disabled) return false;\r\n\r\n  if (val.selected) {\r\n    val.selected = false;\r\n  } else {\r\n    item.values.forEach((bv) => {\r\n      bv.selected = false;\r\n    });\r\n    val.selected = true;\r\n  }\r\n\r\n  if (val.selected) {\r\n    emit(\"change\", {\r\n      size: val.name,\r\n    });\r\n  } else {\r\n    emit(\"change\", null);\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"goods-sku\">\r\n    <dl v-for=\"item in goods.specs\" :key=\"item.name\">\r\n      <dt>Size :</dt>\r\n      <dd>\r\n        <template v-for=\"val in item.values\" :key=\"val.name\">\r\n          <span\r\n            :class=\"{ selected: val.selected, disabled: val.disabled }\"\r\n            @click=\"clickSpecs(item, val)\"\r\n            >{{ val.name }}</span\r\n          >\r\n        </template>\r\n      </dd>\r\n    </dl>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.sku-state-mixin() {\r\n  border: 1px solid #e4e4e4;\r\n  margin-right: 10px;\r\n  cursor: pointer;\r\n\r\n  &.selected {\r\n    border-color: @ssColor;\r\n  }\r\n\r\n  &.disabled {\r\n    opacity: 0.6;\r\n    border-style: dashed;\r\n    cursor: not-allowed;\r\n  }\r\n}\r\n.goods-sku {\r\n  padding-left: 10px;\r\n  padding-top: 20px;\r\n\r\n  dl {\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding-bottom: 20px;\r\n\r\n    dt {\r\n      width: 50px;\r\n      color: #999;\r\n      font-size: 20px;\r\n    }\r\n\r\n    dd {\r\n      flex: 1;\r\n      color: #666;\r\n      > span {\r\n        display: inline-block;\r\n        height: 50px;\r\n        width: 60px;\r\n        margin: 10px 0;\r\n        text-align: center;\r\n        padding-top: 10px;\r\n        font-size: 20px;\r\n        font-weight: 600;\r\n        .sku-state-mixin();\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import script from \"./goods-sku.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./goods-sku.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./goods-sku.vue?vue&type=style&index=0&id=39197009&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\FrontEnd\\\\Vue\\\\shoe-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-39197009\"]])\n\nexport default __exports__","<script setup>\r\nimport useStore from \"@/store\";\r\nimport shoe from \"@/mock/shoe.json\";\r\nimport GoodsImage from \"./components/goods-image\";\r\nimport GoodsSku from \"./components/goods-sku\";\r\nimport { useToast } from \"vue-toastification\";\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nconst { params } = useRoute();\r\nconst id = params.id;\r\nconst goods = ref(null);\r\nconst toast = useToast();\r\n\r\nonMounted(async () => {\r\n  goods.value = shoe.data.filter((s) => s.id === id)[0];\r\n  goods.value.images = [\r\n    `https://vtjoho.b-cdn.net/shoeshop/${goods.value.id}_1.png`,\r\n    `https://vtjoho.b-cdn.net/shoeshop/${goods.value.id}_2.png`,\r\n    `https://vtjoho.b-cdn.net/shoeshop/${goods.value.id}_3.png`,\r\n  ];\r\n});\r\n\r\nconst count = ref(1);\r\nconst countMax = computed(() => {\r\n  if (!goods.value) return 1;\r\n  goods.value.inventory = parseInt(goods.value.inventory);\r\n  return goods.value.inventory > 0 ? goods.value?.inventory : 1;\r\n});\r\n\r\nconst size = ref(\"\");\r\nconst changeSku = (value) => {\r\n  size.value = value;\r\n};\r\n\r\nconst { cart } = useStore();\r\n\r\nconst addCart = () => {\r\n  if (!size.value) {\r\n    toast.info(\"請選擇正確的商品尺寸與數量\", {\r\n      timeout: 3000,\r\n    });\r\n    return;\r\n  }\r\n  if (!goods.value) return;\r\n\r\n  const cartItem = {\r\n    skuId: goods.value.id + size.value.size,\r\n    id: goods.value.id,\r\n    name: goods.value.name,\r\n    price: goods.value.price,\r\n    size: size.value.size,\r\n    count: count.value,\r\n    selected: true,\r\n    isEffective: true,\r\n  };\r\n\r\n  cart.addCart(cartItem);\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"ss-goods-page\">\r\n    <div class=\"container\">\r\n      <div class=\"goods-info\" v-if=\"goods\">\r\n        <div class=\"media\">\r\n          <div class=\"goods-image\">\r\n            <GoodsImage :images=\"goods.images\" />\r\n          </div>\r\n          <ul class=\"goods-sales\">\r\n            <li>\r\n              <p>商品銷量</p>\r\n              <p>100+</p>\r\n              <p><i class=\"iconfont icon-task-filling\"></i>人氣</p>\r\n            </li>\r\n            <li>\r\n              <p>商品評價</p>\r\n              <p>200+</p>\r\n              <p><i class=\"iconfont icon-comment-filling\"></i>評價</p>\r\n            </li>\r\n            <li>\r\n              <p>商品收藏</p>\r\n              <p>80+</p>\r\n              <p><i class=\"iconfont icon-favorite-filling\"></i>收藏</p>\r\n            </li>\r\n            <li>\r\n              <p>品牌資訊</p>\r\n              <p>99+</p>\r\n              <p><i class=\"iconfont icon-dynamic-filling\"></i>品牌</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"spec\">\r\n          <div class=\"goods-main\">\r\n            <p class=\"goods-name\">{{ goods.name }}</p>\r\n            <p class=\"goods-price\">\r\n              <span>{{ goods.price }}</span>\r\n            </p>\r\n          </div>\r\n          <GoodsSku :goods=\"goods\" @change=\"changeSku\" />\r\n          <SsCount is-label v-model=\"count\" :min=\"1\" :max=\"countMax\" />\r\n          <SsButton\r\n            @click=\"addCart\"\r\n            size=\"middle\"\r\n            type=\"primary\"\r\n            style=\"margin-top: 40px\"\r\n          >\r\n            加入購物車\r\n          </SsButton>\r\n        </div>\r\n      </div>\r\n      <div class=\"goods-footer\" v-if=\"goods\">\r\n        <div class=\"goods-article\">\r\n          <h2>商品詳情</h2>\r\n          <p>{{ goods.name }}</p>\r\n          <ul>\r\n            <li v-for=\"img in goods.images\" :key=\"img\">\r\n              <img :src=\"img\" alt=\"\" />\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n.container {\r\n  margin-top: 20px;\r\n}\r\n\r\n.goods-info {\r\n  min-height: 600px;\r\n  background: #fff;\r\n  display: flex;\r\n\r\n  .media {\r\n    width: 700px;\r\n    height: 600px;\r\n    padding: 30px 50px;\r\n  }\r\n\r\n  .spec {\r\n    flex: 1;\r\n    padding: 30px 30px 30px 0;\r\n  }\r\n}\r\n\r\n.goods-sales {\r\n  display: flex;\r\n  width: 400px;\r\n  align-items: center;\r\n  text-align: center;\r\n  height: 140px;\r\n\r\n  li {\r\n    flex: 1;\r\n    position: relative;\r\n\r\n    ~ li::after {\r\n      position: absolute;\r\n      top: 10px;\r\n      left: 0;\r\n      height: 60px;\r\n      border-left: 1px solid #e4e4e4;\r\n      content: \"\";\r\n    }\r\n\r\n    p {\r\n      &:first-child {\r\n        color: #999;\r\n      }\r\n\r\n      &:nth-child(2) {\r\n        color: @priceColor;\r\n        margin-top: 10px;\r\n      }\r\n\r\n      &:last-child {\r\n        color: #666;\r\n        margin-top: 10px;\r\n\r\n        i {\r\n          color: @ssColor;\r\n          font-size: 14px;\r\n          margin-right: 2px;\r\n        }\r\n\r\n        &:hover {\r\n          color: @ssColor;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.spec {\r\n  .goods-name {\r\n    font-size: 22px;\r\n  }\r\n\r\n  .goods-desc {\r\n    color: #999;\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .goods-price {\r\n    margin-top: 10px;\r\n    span {\r\n      color: @priceColor;\r\n      margin-right: 10px;\r\n      font-size: 22px;\r\n      &::before {\r\n        content: \"$\";\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.goods-footer {\r\n  display: flex;\r\n  margin: 20px 0;\r\n\r\n  .goods-article {\r\n    width: 100%;\r\n    padding: 0 30px;\r\n    min-height: 350px;\r\n    background: #fff;\r\n\r\n    p {\r\n      font-size: 24px;\r\n    }\r\n\r\n    li {\r\n      text-align: center;\r\n    }\r\n  }\r\n}\r\n.goods-warn {\r\n  min-height: 600px;\r\n  background: #fff;\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=d553b5ee&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\FrontEnd\\\\Vue\\\\shoe-shop\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-d553b5ee\"]])\n\nexport default __exports__"],"names":["currIndex","ref","show","layerPosition","reactive","left","top","largePosition","backgroundPositionX","backgroundPositionY","target","elementX","elementY","isOutside","useMouseInElement","watch","value","position","x","y","__exports__","clickSpecs","item","val","disabled","selected","values","forEach","bv","emit","size","name","params","useRoute","id","goods","toast","useToast","onMounted","async","shoe","s","images","count","countMax","computed","inventory","parseInt","changeSku","cart","useStore","addCart","info","timeout","cartItem","skuId","price","isEffective"],"sourceRoot":""}